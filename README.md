# EDINET XBRL Analyzer

EDINET APIã‹ã‚‰ä¸Šå ´ä¼æ¥­ã®æ±ºç®—ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€XBRLãƒ•ã‚¡ã‚¤ãƒ«ã‚’è§£æã—ã¦è²¡å‹™åˆ†æã‚’è¡Œã†ã‚·ã‚¹ãƒ†ãƒ ã€‚

## ğŸš€ æ©Ÿèƒ½

- **è‡ªå‹•ãƒ‡ãƒ¼ã‚¿åé›†**: GitHub Actionsã§æ¯æ—¥18æ™‚ï¼ˆJSTï¼‰ã«è‡ªå‹•å®Ÿè¡Œ
- **XBRLè§£æ**: å£²ä¸Šé«˜ãƒ»EPSãƒ»ç´”è³‡ç”£ãªã©ã®è²¡å‹™ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º
- **é™çš„Webåˆ†æ**: ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§SQLiteã‚’ç›´æ¥è§£æï¼ˆã‚µãƒ¼ãƒãƒ¼ãƒ¬ã‚¹ï¼‰
- **è¤‡æ•°ã®åˆ†ææ‰‹æ³•**: ãƒãƒƒãƒˆãƒãƒƒãƒˆãƒãƒªãƒ¥ãƒ¼ã€ã‚ªãƒ‹ãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°ã€ãƒãƒ¼ã‚±ãƒƒãƒˆå¤©äº•æ¤œå‡º

## ğŸ“Š ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          GitHub Actions (æ—¥æ¬¡ãƒãƒƒãƒ)              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. EDINET APIã‹ã‚‰ãƒ‡ãƒ¼ã‚¿å–å¾—              â”‚   â”‚
â”‚  â”‚ 2. XBRLãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‘ãƒ¼ã‚¹                  â”‚   â”‚
â”‚  â”‚ 3. SQLiteã«ä¿å­˜                          â”‚   â”‚
â”‚  â”‚ 4. gzipåœ§ç¸®                              â”‚   â”‚
â”‚  â”‚ 5. GitHub Releasesã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰         â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   GitHub Releases         â”‚
         â”‚  stock_data.db.gz         â”‚
         â”‚  (æ°¸ç¶šä¿å­˜)               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚    GitHub Pages           â”‚
         â”‚  é™çš„HTML + sqlite-wasm   â”‚
         â”‚  ãƒ–ãƒ©ã‚¦ã‚¶ã§DBè§£æ         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | å‚™è€ƒ |
|---------|------|------|
| Runtime | Go 1.23 | é«˜é€Ÿãƒ‘ãƒ¼ã‚¹ãƒ»ä½ãƒ¡ãƒ¢ãƒªå®Ÿè¡Œ |
| Database | SQLite 3 | Pure Goå®Ÿè£…ï¼ˆCGOä¸è¦ï¼‰ |
| Task Runner | go-task | Taskfile.yml |
| CI/CD | GitHub Actions | æ—¥æ¬¡ãƒãƒƒãƒ + Pages ãƒ‡ãƒ—ãƒ­ã‚¤ |
| Storage | GitHub Releases | DBãƒ•ã‚¡ã‚¤ãƒ«ã®æ°¸ç¶šä¿å­˜ |
| Frontend | sqlite-wasm | ãƒ–ãƒ©ã‚¦ã‚¶å†…ã§DBè§£æ |

## ğŸ“‚ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 

```
.
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/
â”‚       â”œâ”€â”€ daily-update.yml      # æ—¥æ¬¡ãƒ‡ãƒ¼ã‚¿æ›´æ–°
â”‚       â””â”€â”€ deploy-pages.yml      # GitHub Pages ãƒ‡ãƒ—ãƒ­ã‚¤
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ raw/                      # ç”ŸXBRLãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ stock_data.db             # SQLiteãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
â”‚   â””â”€â”€ stock_data.db.gz          # åœ§ç¸®ç‰ˆï¼ˆé…ä¿¡ç”¨ï¼‰
â”œâ”€â”€ web/
â”‚   â”œâ”€â”€ index.html                # ãƒ¡ã‚¤ãƒ³ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
â”‚   â”œâ”€â”€ net-net-value.html        # ãƒãƒƒãƒˆãƒãƒƒãƒˆåˆ†æ
â”‚   â”œâ”€â”€ oneil-screen.html         # ã‚ªãƒ‹ãƒ¼ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°
â”‚   â””â”€â”€ market-top.html           # ãƒãƒ¼ã‚±ãƒƒãƒˆå¤©äº•æ¤œå‡º
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ compress_db.sh            # DBåœ§ç¸®ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ main.go                       # ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯
â”œâ”€â”€ Taskfile.yml                  # ã‚¿ã‚¹ã‚¯å®šç¾©
â””â”€â”€ README.md
```

## ğŸ›  å®Ÿè¡Œæ‰‹é †

### 1. åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰
docker compose build

# ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
docker compose run --rm app task init
```

### 2. ãƒ­ãƒ¼ã‚«ãƒ«ã§ã®ãƒ‡ãƒ¼ã‚¿åé›†

```bash
# ç‰¹å®šæ—¥ã®ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
docker compose run --rm app task run -- -mode=run -date=2025-11-13

# ã¾ãŸã¯æ—¥æ¬¡æ›´æ–°ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
docker compose run --rm app task daily-update
```

### 3. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®èµ·å‹•

```bash
docker compose run --rm -p 8080:8080 app task serve
```

ã‚¢ã‚¯ã‚»ã‚¹: `http://localhost:8080`

### 4. ãƒ†ã‚¹ãƒˆè§£æ

```bash
docker compose run --rm app task test-parse
```

## ğŸŒ GitHub Pages ã§ã®å…¬é–‹

### è¨­å®šæ‰‹é †

1. **GitHub Secretsã®è¨­å®š**
   - ãƒªãƒã‚¸ãƒˆãƒªã® Settings â†’ Secrets and variables â†’ Actions
   - `EDINET_API_KEY` ã‚’è¿½åŠ 

2. **GitHub Pages ã®æœ‰åŠ¹åŒ–**
   - Settings â†’ Pages
   - Source: "GitHub Actions" ã‚’é¸æŠ

3. **è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤ã®ç¢ºèª**
   - `web/` ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æ›´æ–°ã—ã¦push
   - Actions ã‚¿ãƒ–ã§é€²è¡ŒçŠ¶æ³ã‚’ç¢ºèª

### ã‚¢ã‚¯ã‚»ã‚¹URL

```
https://<username>.github.io/<repository-name>/
```

## ğŸ“ åˆ©ç”¨å¯èƒ½ãªã‚¿ã‚¹ã‚¯

```bash
# åŸºæœ¬æ“ä½œ
task hello          # ç–é€šç¢ºèª
task init           # åˆæœŸã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
task run            # ãƒ‡ãƒ¼ã‚¿åé›†
task serve          # Webã‚µãƒ¼ãƒãƒ¼èµ·å‹•

# é«˜åº¦ãªæ“ä½œ
task daily-update   # æ—¥æ¬¡æ›´æ–°ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
task compress       # DBã®åœ§ç¸®
task build-web      # Webè³‡ç”£ã®ãƒ“ãƒ«ãƒ‰
task clean          # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
```

## ğŸ”§ é–‹ç™ºç’°å¢ƒ

### å¿…è¦ãªãƒ„ãƒ¼ãƒ«

- Docker Desktop
- Git

### ç’°å¢ƒå¤‰æ•°

```bash
# .envãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ
EDINET_API_KEY=your_api_key_here
```

## ğŸ“ˆ ä»Šå¾Œã®å®Ÿè£…äºˆå®š

### Phase 1: ãƒ‡ãƒ¼ã‚¿å±¤ã®å¼·åŒ–
- [ ] æ ªä¾¡ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã¨ä¿å­˜
- [ ] EPSãƒ»ç´”è³‡ç”£ã®æŠ½å‡º
- [ ] æ±ºç®—ç™ºè¡¨æ—¥ã®è¨˜éŒ²

### Phase 2: åˆ†ææ©Ÿèƒ½
- [ ] ãƒãƒƒãƒˆãƒãƒƒãƒˆãƒãƒªãƒ¥ãƒ¼è¨ˆç®—
- [ ] ã‚ªãƒ‹ãƒ¼ãƒ«æˆé•·æ ªã‚¹ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°
- [ ] ãƒãƒ¼ã‚±ãƒƒãƒˆå¤©äº•æ¤œå‡ºãƒ­ã‚¸ãƒƒã‚¯

### Phase 3: UIæ”¹å–„
- [ ] ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒãƒ£ãƒ¼ãƒˆ
- [ ] ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½
- [ ] ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³

### Phase 4: é€šçŸ¥æ©Ÿèƒ½
- [ ] æ–°è¦éŠ˜æŸ„ã®è‡ªå‹•æ¤œå‡º
- [ ] GitHub Issue ã§ã®é€šçŸ¥
- [ ] æ¡ä»¶é”æˆæ™‚ã®ã‚¢ãƒ©ãƒ¼ãƒˆ

## âš¡ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒãƒ¼ãƒˆç«¶åˆ

```bash
# 8080ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ä¸­ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’ç¢ºèª
lsof -i :8080

# ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢
kill -9 <PID>
```

### GitHub Actions ã®å¤±æ•—

1. Actions ã‚¿ãƒ–ã§è©³ç´°ãƒ­ã‚°ã‚’ç¢ºèª
2. SecretsãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
3. è‡ªå‹•ä½œæˆã•ã‚ŒãŸIssueã‚’ç¢ºèª

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãŒå£Šã‚ŒãŸå ´åˆ

```bash
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’å‰Šé™¤ã—ã¦å†æ§‹ç¯‰
task clean
task daily-update
```

## ğŸ“š å‚è€ƒè³‡æ–™

- [EDINET APIä»•æ§˜æ›¸](https://disclosure2.edinet-fsa.go.jp/)
- [SQLite WASM Documentation](https://sqlite.org/wasm/)
- [GitHub Actions Documentation](https://docs.github.com/actions)

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ğŸ™ è¬è¾

æœ¬ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯ [kawasin73æ°ã®ãƒ–ãƒ­ã‚°è¨˜äº‹](https://kawasin73.hatenablog.com/entry/2025/11/20/224346) ã‚’å‚è€ƒã«ã—ã¦é–‹ç™ºã•ã‚ŒãŸã‚ã€‚
